<?xml version="1.0" encoding="UTF-8"?>

<entitymodel xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://www.ofbiz.org/dtds/entitymodel.xsd">
    <title>Entity definitions for mailer</title>    
    <author>IntelliAnt</author>
	
    <entity entity-name="MailerMarketingCampaign" package-name="net.intelliant.mailer" title="Mailer Marketing Campaign Entity">
    	<field name="marketingCampaignId" type="id-ne"/>
    	<field name="fromEmailAddress" type="id-long" not-null="true"/>
    	<field name="templateId" type="id" not-null="true"/>        
    	<prim-key field="marketingCampaignId"/>
    	<relation type="one" fk-name="MMC_TO_MKTGCPN" rel-entity-name="MarketingCampaign">
        	<key-map field-name="marketingCampaignId"/>
      	</relation>
      	<relation type="one" fk-name="MMC_TO_MERGEFORM" rel-entity-name="MergeForm">
        	<key-map field-name="templateId" rel-field-name="mergeFormId"/>
      </relation>
    </entity> 
    
    <view-entity entity-name="MailerMarketingCampaignAndMarketingCampaignAppl" package-name="net.intelliant.mailer">
        <member-entity entity-alias="MC" entity-name="MarketingCampaign"/>
        <member-entity entity-alias="MMC" entity-name="MailerMarketingCampaign"/>
        <alias-all entity-alias="MC"></alias-all>
        <alias-all entity-alias="MMC"></alias-all>
        <view-link entity-alias="MC" rel-entity-alias="MMC" rel-optional="true">
            <key-map field-name="marketingCampaignId"/>
        </view-link>
    </view-entity>
    
    <entity entity-name="MailerMarketingCampaignAndContactList" package-name="net.intelliant.mailer" title="Associate contact lists to mailer marketing campaigns">
        <field name="campaignListId" type="id-ne"/>
        <field name="marketingCampaignId" type="id-ne"/>
        <field name="contactListId" type="id-ne"/>
        <field name="fromDate" type="date-time"/>
        <field name="thruDate" type="date-time"/>
        <prim-key field="campaignListId"/>
        <relation type="one" fk-name="MMCACL_TO_MC" rel-entity-name="MarketingCampaign">
            <key-map field-name="marketingCampaignId"/>
        </relation>
        <relation type="one" fk-name="MMCACL_TO_CL" rel-entity-name="ContactList">
            <key-map field-name="contactListId"/>
        </relation>
    </entity>
    
	<view-entity entity-name="MailerMarketingCampaignAndContactListDetails" package-name="net.intelliant.mailer" title="mailer marketing campaign and contact list"> 
		<member-entity entity-alias="MMCCL" entity-name="MailerMarketingCampaignAndContactList"/>
		<member-entity entity-alias="CL" entity-name="ContactList"/>
		<alias-all entity-alias="CL">
			<exclude field="marketingCampaignId" />
		</alias-all>
		<alias-all entity-alias="MMCCL" />
		<view-link entity-alias="MMCCL" rel-entity-alias="CL">
			<key-map field-name="contactListId"/>
		</view-link>
	</view-entity>  
</entitymodel>